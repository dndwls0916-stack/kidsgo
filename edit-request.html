<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ì •ë³´ ìˆ˜ì • ìš”ì²­</title>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<style>
body {
  font-family: sans-serif;
  max-width: 600px;
  margin: 50px auto;
  padding: 20px;
}

input, select, textarea {
  width: 100%;
  padding: 10px;
  margin-bottom: 15px;
  border: 1px solid #ddd;
  border-radius: 6px;
}

button {
  background: #ff6b6b;
  color: white;
  padding: 12px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  width: 100%;
  font-size: 16px;
}

button:hover {
  background: #ff5252;
}
</style>

</head>
<body>

<h2>ì •ë³´ ìˆ˜ì • ìš”ì²­</h2>

<form id="editForm">

  <input type="text" id="store_name" placeholder="ë§¤ì¥ëª…" required>

  <select id="field_name" required>
    <option value="">ìˆ˜ì • í•­ëª© ì„ íƒ</option>
    <option value="hours">ì˜ì—…ì‹œê°„</option>
    <option value="has_parking">ì£¼ì°¨ ì—¬ë¶€</option>
    <option value="has_highchair">ìœ ì•„ì˜ì</option>
    <option value="has_nursing_room">ìˆ˜ìœ ì‹¤</option>
    <option value="phone">ì „í™”ë²ˆí˜¸</option>
    <option value="address">ì£¼ì†Œ</option>
    <option value="ê¸°íƒ€">ê¸°íƒ€</option>
  </select>

  <textarea id="old_value" placeholder="í˜„ì¬ í‘œì‹œëœ ì •ë³´ (ì„ íƒ)"></textarea>

  <textarea id="new_value" placeholder="ìˆ˜ì •í•  ë‚´ìš© ì…ë ¥" required></textarea>

  <textarea id="reason" placeholder="ìˆ˜ì • ì‚¬ìœ  (ì„ íƒ)"></textarea>

  <button type="submit">ìˆ˜ì • ìš”ì²­ ë³´ë‚´ê¸°</button>

</form>

<script>
const supabaseUrl = "YOUR_SUPABASE_URL";
const supabaseKey = "YOUR_PUBLIC_ANON_KEY";

const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

document.getElementById("editForm").addEventListener("submit", async (e) => {
  e.preventDefault();

  const data = {
    store_name: document.getElementById("store_name").value,
    field_name: document.getElementById("field_name").value,
    old_value: document.getElementById("old_value").value,
    new_value: document.getElementById("new_value").value,
    reason: document.getElementById("reason").value
  };

  const { error } = await supabase
    .from("edit_requests")
    .insert([data]);

  if (error) {
    alert("ì „ì†¡ ì‹¤íŒ¨ ğŸ˜¢ ì½˜ì†” í™•ì¸í•˜ì„¸ìš”.");
    console.error(error);
  } else {
    alert("ìˆ˜ì • ìš”ì²­ì´ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤!");
    e.target.reset();
  }
});
</script>

</body>
</html>